box: golang

build:
  steps:
    - setup-go-workspace
    - script:
      name: go get
      code: |
        go get

    - script:
      name: go build
      code: |
        go build ./GeneralWebApi/..

    - script:
      name: go test
      code: |
        go test ./GeneralWebApi/..
deploy:
  steps:
  - internal/docker-push:
        username: $USERNAME
        password: $PASSWORD
        repository: vptlabs.azurecr.io/generalwebapi
        registry: https://vptlabs.azurecr.io
        ports: "8080, 6060"